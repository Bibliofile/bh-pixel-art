!function(t){var n={};function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var o in t)e.d(r,o,function(n){return t[n]}.bind(null,o));return r},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=0)}([function(t,n,e){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};n.__esModule=!0;var o=r(e(1)),i=e(2),a=document.querySelector("canvas"),u=document.querySelector("input[data-for=image]"),c=document.querySelector("input[data-for=width]"),l=document.querySelector("input[data-for=height]"),d=document.querySelector("input[data-for=colors]"),f=document.querySelector("button"),s=document.querySelector("input[data-for=text]"),p=document.querySelector("input[data-for=square]"),g=document.querySelector("input[data-for=border]"),C=document.querySelector("tbody"),m=new Image,h=a.getContext("2d");if(!h)throw alert("Failed to get canvas. Your browser is not supported."),Error("Bad browser");function R(){var t,n=+p.value,e=+s.value,r=document.createElement("canvas"),u=r.getContext("2d"),f=Math.min(+c.value,m.width),R=Math.min(+l.value,m.height),P=m.height/R/(m.width/f);P<1?R=Math.ceil(R*P):f=Math.ceil(f*(1/P)),console.log(f,R,P,n),r.width=f,a.width=f*n+1,r.height=R,a.height=R*n+1,u.drawImage(m,0,0,f,R);for(var B=nearestColor.from(i.recipes),G=new Map,Y=u.getImageData(0,0,f,R).data,K=0;K<R;K++)for(var W=0;W<f;W++){var v=K*f*4+4*W,N=B({r:Y[v],g:Y[v+1],b:Y[v+2]}).name;G.set(N,(null!==(t=G.get(N))&&void 0!==t?t:0)+1)}var b=Array.from(G.entries()).sort((function(t,n){return t[1]-n[1]})).slice(-d.value).reverse(),y=b.reduce((function(t,n){return t[n[0]]=i.recipes[n[0]],t}),{}),S=nearestColor.from(y);g.checked&&(h.fillStyle="#000000",h.fillRect(0,0,a.width,a.height));for(K=0;K<R;K++){var w=function(t){var r=K*f*4+4*t,i=S({r:Y[r],g:Y[r+1],b:Y[r+2]});h.fillStyle=i.value,h.fillRect(t*n+1,K*n+1,n-1,n-1),h.fillStyle=o.default(i.rgb,!0),h.font=e+"px sans-serif",h.fillText(String(b.findIndex((function(t){return t[0]===i.name}))+1),t*n+1,K*n+e+1)};for(W=0;W<f;W++)w(W)}for(;C.firstChild;)C.firstChild.remove();for(var x=0;x<b.length;x++){var M=document.createElement("tr");M.appendChild(document.createElement("td")).textContent=String(x+1);for(var E=M.appendChild(document.createElement("td")),_=0,j=i.getImageLinks(b[x][0]);_<j.length;_++){var q=j[_],I=document.createElement("img");I.src=q,I.width=I.height=30,E.appendChild(I)}M.appendChild(document.createElement("td")).textContent=b[x][1].toString(),M.appendChild(document.createElement("td")).textContent=Math.ceil(b[x][1]/128).toString(),C.appendChild(M)}}f.addEventListener("click",R),m.addEventListener("load",R),u.addEventListener("change",(function(){f.disabled=!1,m.src=URL.createObjectURL(u.files[0])}))},function(t,n,e){
/*! @license https://github.com/onury/invert-color */
t.exports=function(){"use strict";var t=Math.sqrt(1.05*.05)-.05,n=/^(?:[0-9a-f]{3}){1,2}$/i,e={black:"#000000",white:"#ffffff",threshold:t};function r(t){if("#"===t.slice(0,1)&&(t=t.slice(1)),!n.test(t))throw new Error('Invalid HEX color: "'+t+'"');return 3===t.length&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),[parseInt(t.slice(0,2),16),parseInt(t.slice(2,4),16),parseInt(t.slice(4,6),16)]}function o(t){if(!t)throw new Error("Invalid color value");return Array.isArray(t)?t:"string"==typeof t?r(t):[t.r,t.g,t.b]}function i(t,n,o){var i=!0===n?e:Object.assign({},e,n);return function(t){var n,e,r=[];for(n=0;n<t.length;n++)e=t[n]/255,r[n]=e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4);return.2126*r[0]+.7152*r[1]+.0722*r[2]}(t)>i.threshold?o?r(i.black):i.black:o?r(i.white):i.white}function a(t,n){return void 0===n&&(n=!1),t=o(t),n?i(t,n):"#"+t.map((function(t){return n=(255-t).toString(16),void 0===e&&(e=2),(new Array(e).join("0")+n).slice(-e);var n,e})).join("")}return function(n){function e(t,n){var e;return t=o(t),{r:(e=n?i(t,n,!0):t.map((function(t){return 255-t})))[0],g:e[1],b:e[2]}}n.asRGB=e,n.asRgbArray=function(t,n){return t=o(t),n?i(t,n,!0):t.map((function(t){return 255-t}))},n.defaultThreshold=t,n.asRgbObject=e}(a||(a={})),a}()},function(t,n,e){"use strict";n.__esModule=!0,n.recipes="\nR\tN\tN\t194\t25\t4\nY\tN\tN\t231\t212\t32\nG\tN\tN\t6\t225\t107\nC\tN\tN\t0\t219\t237\nB\tN\tN\t0\t64\t180\nP\tN\tN\t127\t13\t153\nW\tN\tN\t255\t255\t255\nK\tN\tN\t0\t0\t0\nR\tY\tN\t220\t120\t24\nR\tG\tN\t96\t131\t51\nR\tC\tN\t94\t126\t121\nR\tB\tN\t104\t46\t96\nR\tP\tN\t159\t20\t79\nR\tW\tN\t227\t141\t124\nR\tK\tN\t97\t14\t0\nR\tR\tY\t205\t89\t16\nR\tR\tG\t134\t94\t33\nR\tR\tC\t135\t91\t78\nR\tR\tB\t129\t39\t64\nR\tR\tW\t215\t102\t84\nR\tR\tP\t163\t26\t56\nR\tR\tK\t129\t15\t4\nR\tY\tG\t143\t156\t50\nR\tY\tC\t143\t153\t100\nR\tG\tC\t65\t160\t118\nR\tY\tB\t145\t101\t76\nR\tG\tB\t65\t109\t94\nR\tC\tB\t62\t106\t145\nR\tY\tP\t185\t84\t66\nR\tG\tP\t103\t92\t88\nR\tC\tP\t105\t89\t136\nR\tB\tP\t105\t36\t119\nR\tY\tW\t226\t169\t102\nR\tG\tW\t151\t170\t125\nR\tC\tW\t152\t171\t169\nR\tB\tW\t150\t117\t146\nR\tP\tW\t188\t100\t140\nR\tY\tK\t140\t79\t16\nR\tG\tK\t66\t85\t40\nR\tC\tK\t64\t83\t81\nR\tB\tK\t66\t32\t59\nR\tP\tK\t104\t14\t50\nR\tW\tK\t153\t93\t85\nR\tY\tY\t223\t150\t22\nY\tY\tG\t153\t217\t68\nY\tY\tC\t160\t214\t103\nY\tY\tB\t156\t163\t86\nY\tY\tP\t198\t144\t80\nY\tY\tW\t244\t223\t114\nY\tY\tK\t160\t137\t31\nY\tG\tN\t114\t224\t65\nY\tC\tN\t119\t215\t144\nY\tB\tN\t116\t139\t111\nY\tP\tN\t176\t113\t95\nY\tW\tN\t244\t231\t153\nY\tK\tN\t116\t106\t21\nY\tG\tC\t76\t221\t126\nY\tG\tB\t78\t169\t102\nY\tG\tP\t118\t154\t108\nY\tG\tW\t162\t235\t130\nY\tG\tK\t83\t149\t51\nY\tC\tB\t84\t167\t157\nY\tC\tP\t117\t149\t144\nY\tC\tW\t164\t232\t175\nY\tC\tK\t76\t145\t91\nY\tB\tP\t119\t99\t127\nY\tB\tW\t161\t175\t160\nY\tB\tK\t79\t92\t75\nY\tP\tW\t205\t162\t155\nY\tP\tK\t117\t77\t65\nY\tW\tK\t167\t158\t101\nR\tG\tG\t70\t165\t73\nY\tG\tG\t82\t225\t83\nG\tG\tC\t0\t227\t148\nG\tG\tB\t0\t176\t129\nG\tG\tP\t40\t156\t121\nG\tG\tW\t90\t238\t154\nG\tG\tK\t2\t154\t69\nG\tC\tN\t0\t223\t167\nG\tB\tN\t5\t148\t146\nG\tP\tN\t63\t121\t132\nG\tW\tN\t128\t245\t177\nG\tK\tN\t6\t115\t48\nG\tC\tB\t2\t171\t176\nG\tC\tP\t46\t153\t171\nG\tC\tW\t84\t235\t200\nG\tC\tK\t0\t150\t115\nG\tB\tP\t41\t104\t147\nG\tB\tW\t88\t182\t181\nG\tB\tK\t2\t99\t92\nG\tP\tW\t126\t167\t171\nG\tP\tK\t43\t80\t86\nG\tW\tK\t90\t161\t121\nR\tC\tC\t63\t159\t158\nY\tC\tC\t77\t217\t172\nG\tC\tC\t5\t224\t194\nC\tC\tB\t1\t171\t222\nC\tC\tP\t43\t153\t214\nC\tC\tW\t86\t233\t243\nC\tC\tK\t0\t147\t164\nC\tB\tN\t1\t146\t211\nC\tP\tN\t59\t117\t199\nC\tW\tN\t124\t238\t248\nC\tK\tN\t1\t112\t119\nC\tB\tP\t49\t97\t195\nC\tB\tW\t84\t183\t222\nC\tB\tK\t9\t93\t140\nC\tP\tW\t123\t164\t218\nC\tP\tK\t38\t79\t133\nC\tW\tK\t83\t160\t166\nB\tP\tW\t128\t113\t204\nB\tP\tK\t43\t28\t111\nB\tW\tK\t85\t105\t140\nR\tB\tB\t70\t53\t123\nY\tB\tB\t78\t115\t134\nG\tB\tB\t0\t121\t150\nC\tB\tB\t0\t121\t203\nB\tB\tP\t42\t51\t172\nB\tB\tW\t83\t129\t206\nB\tB\tK\t11\t44\t121\nB\tP\tN\t62\t39\t171\nB\tW\tN\t132\t163\t220\nB\tK\tN\t5\t33\t96\nP\tW\tN\t184\t139\t198\nP\tP\tK\t78\t11\t104\nB\tP\tP\t81\t32\t158\nC\tP\tP\t81\t83\t184\nY\tP\tP\t158\t81\t117\nG\tP\tP\t80\t85\t140\nR\tP\tP\t148\t20\t105\nP\tP\tW\t161\t96\t188\nP\tW\tK\t128\t90\t139\nP\tK\tN\t60\t9\t78\nR\tK\tK\t67\t9\t5\nY\tK\tK\t79\t70\t11\nG\tK\tK\t1\t76\t35\nC\tK\tK\t1\t74\t83\nB\tK\tK\t1\t22\t65\nP\tK\tK\t40\t3\t54\nW\tK\tK\t85\t85\t85\nG\tW\tW\t169\t248\t201\nY\tW\tW\t248\t239\t182\nC\tW\tW\t166\t240\t253\nR\tW\tW\t237\t178\t172\nB\tW\tW\t172\t191\t233\nP\tW\tW\t212\t172\t222\nW\tW\tK\t170\t170\t170\nW\tK\tN\t125\t125\t125\n".trim().split("\n").map((function(t){var n=t.split("\t"),e=n.slice(0,3).join("").replace(/N/g,""),r=n.slice(3).map(Number);return[e,"#"+r[0].toString(16).padStart(2,"0")+r[1].toString(16).padStart(2,"0")+r[2].toString(16).padStart(2,"0")]})).reduce((function(t,n){var e=n[0],r=n[1];return t[e]=r,t}),{});var r={K:"images/black.png",W:"images/white.png",R:"images/red.png",Y:"images/yellow.png",B:"images/blue.png",C:"images/aqua.png",G:"images/green.png",P:"images/purple.png"};n.getImageLinks=function(t){return t.split("").map((function(t){return r[t]}))}}]);